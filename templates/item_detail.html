{% extends "layout.html" %}
{% block body %}
  <!-- Pulls up the item detail when you click on the item -->
  <article class="card" style="padding-top: 30px; padding-left: 30px; padding-right: 30px;">
    <h2 style="margin-top:0;">{{ item.title }}</h2>
    {% if item.image_path %}
      <img src="{{ url_for('static', filename=item.image_path) }}" alt="{{ item.title }}" style="width:100%; max-height:420px; object-fit:cover; border-radius:10px; border:1px solid #ddd; margin:.5rem 0 1rem;">
    {% else %}
      <img src="{{ url_for('static', filename='default-item.png') }}" alt="No image"
                style="width:100%; height:250px; object-fit:cover;">
      <div style="width: 100%; height: 250px; background: linear-gradient(135deg, #0b6 0%, #08a 100%); display: none; align-items: center; justify-content: center; color: #fff; font-size: 1.2rem; font-weight: 600;">
                No image available
      </div>
    {% endif %}
    <div style="display: flex; gap: 1rem; align-items: flex-start; margin-top: 30px;">
      <div style="flex: 1; min-width: 0;">
        <p>{{ item.description }}</p>
        <p style="color:#555">
          {% if item.category %}<strong>Category:</strong> {{ item.category }} · {% endif %}
          {% if item.condition %}<strong>Condition:</strong> {{ item.condition }} · {% endif %}
          {% if item.location %}<strong>Pickup:</strong> {{ item.location }} · {% endif %}
          <strong>Status:</strong> {{ item.status }}
        </p>
        <p style="color:#333;"><strong>Contact:</strong> {{ item.contact }}</p>
      </div>

      <div style="display: flex; flex-direction: column; gap: 10px; flex-shrink: 0;">
        <p style="color:#777; font-size:.9rem;">Posted by
        <form method="post" action="{{ url_for('users.user_profile') }}">
          <input type="hidden" name="profile_username" value="{{ item.username }}">
          <button style="background: none; border: none; padding: 0;" type="submit">{{ item.username }}</button>
        </form> on {{ item.created_at }}</p>
      </div>
    </div>

  </article>
{% endblock %}
