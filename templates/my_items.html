{% extends "layout.html" %} Your items {% block body %}
<!--The user item page-->
<style>
  /* Responsive styles for different screen sizes */
  @media (max-width: 768px) {
    article.card {
      flex-direction: column !important;
    }

    article.card img, article.card > div:first-of-type {
      width: 100% !important;
      max-width: 100% !important;
    }

    article.card image {
      height: auto !important;
      max-height: 200px !important;
    }

    .item-buttons a, .item-buttons button {
      width: 100%;
    }
  }

  /* Responsive page for mobile like small screen */
  @media (max-width: 480px) {
    article.card {
      padding: 0.75rem !important;
      gap: 0.75rem !important;
    }

    h3 {
      font-size: 1.1rem !important;
    }

    p {
      font-size: 0.85rem !important;
    }

    .item-buttons a, .item-buttons button {
      padding: 0.5rem !important;
      font-size: 0.85rem !important;
    }

    .item-buttons svg {
      width: 16px !important;
      height: 16px !important;
    }
  }
</style>

<ol>
  {% for it in items %}
  <article class="card" style="display: flex; gap: 1rem; align-items: flex-start;">
    <!-- Image on the left -->
    {% if it.image_path %}
    <img
      src="{{ url_for('static', filename=it.image_path) }}"
      alt="{{ it.title }}"
      style="
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 8px;
        border: 1px solid #ddd;
        flex-shrink: 0;
      "
    />
    {% else %}
    <div style="position:relative; width: 120px; height: 120px; flex-shrink: 0;">
      <img src="{{ url_for('static', filename='default-item.png') }}" alt="No image"
          style="width: 120px;
          height: 120px;
          object-fit: cover;
          border-radius: 8px;
          border: 1px solid #ddd;"
      />
      <div style="width: 120px; height: 120px; background: linear-gradient(135deg, #0b6 0%, #08a 100%); display: none;
                align-items: center; justify-content: center; color: #fff; font-size: 0.8rem; font-weight: 600;
                border-radius: 8px; border: 1px solid #ddd; text-align: center; position: absolute; top: 0; left: 0;">
        No<br>Image
      </div>
    </div>
    {% endif %}

    <!-- Details in the middle -->
      <div style="flex: 1; min-width: 0;">
        <h3 style="margin: 0.2rem 0">
          <a href="{{ url_for('items.item_detail', item_id=it.id) }}"
            >{{ it.title }}</a
          >
        </h3>
        <p style="margin: 0.2rem 0; color: #555">
          {{ it.description[:160] }}{% if it.description|length > 160 %}…{%
          endif %}
        </p>
        <p style="margin: 0.2rem 0; color: #777; font-size: 0.9rem">
          {% if it.category %}#{{ it.category }} · {% endif %} {% if
          it.condition %}Condition: {{ it.condition }} · {% endif %} Posted by
          {{ it.username }} · {{ it.created_at }}
        </p>
      </div>

      <!-- Buttons on the right side -->
      <div class="item-buttons" style="display: flex; flex-direction: column; gap: 10px; flex-shrink: 0;">
        <!-- Edit button -->
        <a href="{{ url_for('items.edit_item', item_id=it.id) }}" style="display: flex; flex-direction: row; align-items: center;
                    column-gap: 10px; border: 1px solid grey; padding: 10px; border-radius: 4px; color: black; text-decoration: none; background: #e7e7ec;">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-square-pen-icon lucide-square-pen"
          >
            <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
            <path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z" />
          </svg>
          <span>Edit</span>
        </a>

      </div>
      <div style="display: flex; flex-direction: column; gap: 10px; flex-shrink: 0;">
        <!-- Delete button -->
        <button onclick="confirmDelete({{ it.id }}, '{{ it.title }}')" style="display: flex; flex-direction: row; align-items: center;
                    column-gap: 10px; border: 1px solid grey; padding: 10px; border-radius: 4px; color: black; text-decoration: none; background: #e7e7ec;">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-trash-icon lucide-trash"
          >
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
            <path d="M3 6h18" />
            <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
          </svg>
          <span>Delete</span>
        </button>
          <form id="delete-form-{{ it.id }}" action="{{ url_for('items.delete_item', item_id=it.id) }}" method="post" style="display: none"></form>
      </div>
  </article>
  {% else %}
  <div class="card">
    No items yet. Create a
    <a href="{{ url_for('items.create_item') }}">post</a>!
  </div>
  {% endfor %}
<!--
this was implemented using outside sources(google search AI, stack overflow,
https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit
https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById )
-->
<script>
    function confirmDelete(item_id, itemTitle) {
        if (confirm('Are you sure you want to delete"' + itemTitle + '"? This cannot be undone.')) {
            document.getElementById('delete-form-' + item_id).submit();
        }
    }
</script>
</ol>
{% endblock %}