{% extends "layout.html" %} Your items {% block body %}
<ol>
  {% for it in items %}
  <article class="card" style="display: flex; gap: 1rem">
    {% if it.image_path %}
    <img
      src="{{ url_for('static', filename=it.image_path) }}"
      alt="{{ it.title }}"
      style="
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 8px;
        border: 1px solid #ddd;
      "
    />
    {% endif %}
    <div>
      <div style="flex: 1">
        <h3 style="margin: 0.2rem 0">
          <a href="{{ url_for('item_detail', item_id=it.id) }}"
            >{{ it.title }}</a
          >
        </h3>
        <p style="margin: 0.2rem 0; color: #555">
          {{ it.description[:160] }}{% if it.description|length > 160 %}…{%
          endif %}
        </p>
        <p style="margin: 0.2rem 0; color: #777; font-size: 0.9rem">
          {% if it.category %}#{{ it.category }} · {% endif %} {% if
          it.condition %}Condition: {{ it.condition }} · {% endif %} Posted by
          {{ it.username }} · {{ it.created_at }}
        </p>
      </div>
      <div style="display: flex; column-gap: 40px">
        <a href="{{ url_for('edit_item', item_id=it.id) }}" style="display: flex; flex-direction: row; align-items: center;
                    column-gap: 10px; border: 1px solid grey; padding: 10px; border-radius: 4px; color: black; text-decoration: none; background: lightgray;">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-square-pen-icon lucide-square-pen"
          >
            <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
            <path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z" />
          </svg>
          <span>Edit</span>
        </a>
        <button onclick="confirmDelete({{ it.id }}, '{{ it.title }}')" style="display: flex; flex-direction: row; align-items: center; column-gap: 10px;">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-trash-icon lucide-trash"
          >
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
            <path d="M3 6h18" />
            <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
          </svg>
          <span>Delete</span>
        </button>
          <form id="delete-form-{{ it.id }}" action="{{ url_for('delete_item', item_id=it.id) }}" method="post" style="display: none"></form>
      </div>
    </div>
  </article>
  {% else %}
  <div class="card">
    No items yet. Be the first to
    <a href="{{ url_for('create_item') }}">post</a>!
  </div>
  {% endfor %}
<!--
this was implemented using outside sources(google search AI, stack overflow,
https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit
https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById )
-->
<script>
    function confirmDelete(item_id, itemTitle) {
        if (confirm('Are you sure you want to delete"' + itemTitle + '"? This cannot be undone.')) {
            document.getElementById('delete-form-' + item_id).submit();
        }
    }
</script>
</ol>
{% endblock %}
